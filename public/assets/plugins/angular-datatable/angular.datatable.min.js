/**
 * Created by medna on 13/02/2017.
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="datatables"),function(a,b,c,d){"use strict";function e(a,b,c,e,f,g){function h(a){var b=a[0].innerHTML;return function(c,e,g,h){function i(a,c){a!==c&&h.render(e,h.buildOptionsPromise(),b)}var j=g.dtDisableDeepWatchers?"$watchCollection":"$watch";d.forEach(["dtColumns","dtColumnDefs","dtOptions"],function(a){c[j].call(c,a,i,!0)}),f.showLoading(e,c),h.render(e,h.buildOptionsPromise(),b)}}function i(h){function k(){var e=a.defer();return a.all([a.when(h.dtOptions),a.when(h.dtColumns),a.when(h.dtColumnDefs)]).then(function(e){var f=e[0],h=e[1],i=e[2];g.deleteProperty(f,"$promise"),g.deleteProperty(h,"$promise"),g.deleteProperty(i,"$promise");var j;if(d.isDefined(f)&&(j={},d.extend(j,f),d.isArray(h)&&(j.aoColumns=h),d.isArray(i)&&(j.aoColumnDefs=i),j.language&&j.language.url)){var k=a.defer(),l=j.language.url;b.get(j.language.url).then(function(a){k.resolve(a)},function(){c.error("Could not fetch the content of the language from "+l)}),j.language=k.promise}return g.resolveObjectPromises(j,["data","aaData","fnPromise"])}).then(function(a){e.resolve(a)}),e.promise}function l(a,b,c){b.then(function(b){f.preRender(b);var d=h.datatable&&"ng"===h.datatable;i&&i._renderer?i._renderer.withOptions(b).render(a,h,c).then(function(a){i=a,m(a)}):e.fromOptions(b,d).render(a,h,c).then(function(a){i=a,m(a)})})}function m(a){d.isFunction(h.dtInstance)?h.dtInstance(a):d.isDefined(h.dtInstance)&&(h.dtInstance=a)}var i,j=this;j.buildOptionsPromise=k,j.render=l}return h.$inject=["tElm"],i.$inject=["$scope"],{restrict:"A",scope:{dtOptions:"=",dtColumns:"=",dtColumnDefs:"=",datatable:"@",dtInstance:"="},compile:h,controller:i}}function f(){var a={withOption:function(a,b){return d.isString(a)&&(this[a]=b),this},withSource:function(a){return this.ajax=a,this},withDataProp:function(a){return this.sAjaxDataProp=a,this},withFnServerData:function(a){if(!d.isFunction(a))throw new Error("The parameter must be a function");return this.fnServerData=a,this},withPaginationType:function(a){if(!d.isString(a))throw new Error("The pagination type must be provided");return this.sPaginationType=a,this},withLanguage:function(a){return this.language=a,this},withLanguageSource:function(a){return this.withLanguage({url:a})},withDisplayLength:function(a){return this.iDisplayLength=a,this},withFnPromise:function(a){return this.fnPromise=a,this},withDOM:function(a){return this.dom=a,this}};return{newOptions:function(){return Object.create(a)},fromSource:function(b){var c=Object.create(a);return c.ajax=b,c},fromFnPromise:function(b){var c=Object.create(a);return c.fnPromise=b,c}}}function g(){var a={withOption:function(a,b){return d.isString(a)&&(this[a]=b),this},withTitle:function(a){return this.sTitle=a,this},withClass:function(a){return this.sClass=a,this},notVisible:function(){return this.bVisible=!1,this},notSortable:function(){return this.bSortable=!1,this},renderWith:function(a){return this.mRender=a,this}};return{newColumn:function(b,c){if(d.isUndefined(b))throw new Error('The parameter "mData" is not defined!');var e=Object.create(a);return e.mData=b,d.isDefined(c)&&(e.sTitle=c),e},DTColumn:a}}function h(a){return{newColumnDef:function(b){if(d.isUndefined(b))throw new Error('The parameter "targets" must be defined! See https://datatables.net/reference/option/columnDefs.targets');var c=Object.create(a.DTColumn);return d.isArray(b)?c.aTargets=b:c.aTargets=[b],c}}}function i(a,b,c){return{compileHtml:function(e){return a(d.element('<div class="'+c+'">'+b.loadingTemplate+"</div>"))(e)},isLoading:function(a){return a.hasClass(c)}}}function j(){function b(b){var c=Object.create(a);return c._renderer=b,c}function c(a,b){b.id=a.id,b.DataTable=a.DataTable,b.dataTable=a.dataTable}function d(a,b){this._renderer.reloadData(a,b)}function e(a){this._renderer.changeData(a)}function f(){this._renderer.rerender()}var a={reloadData:d,changeData:e,rerender:f};return{newDTInstance:b,copyDTProperties:c}}function k(){c.fn.DataTable.Api&&c.fn.DataTable.Api.register("ngDestroy()",function(b){return b=b||!1,this.iterator("table",function(d){var o,e=d.nTableWrapper.parentNode,f=d.oClasses,g=d.nTable,h=d.nTBody,i=d.nTHead,j=d.nTFoot,k=c(g),l=c(h),m=c(d.nTableWrapper),n=c.map(d.aoData,function(a){return a.nTr});d.bDestroying=!0,c.fn.DataTable.ext.internal._fnCallbackFire(d,"aoDestroyCallback","destroy",[d]),b||new c.fn.DataTable.Api(d).columns().visible(!0),m.unbind(".DT").find(":not(tbody *)").unbind(".DT"),c(a).unbind(".DT-"+d.sInstance),g!==i.parentNode&&(k.children("thead").detach(),k.append(i)),j&&g!==j.parentNode&&(k.children("tfoot").detach(),k.append(j)),k.detach(),m.detach(),d.aaSorting=[],d.aaSortingFixed=[],c.fn.DataTable.ext.internal._fnSortingClasses(d),c(n).removeClass(d.asStripeClasses.join(" ")),c("th, td",i).removeClass(f.sSortable+" "+f.sSortableAsc+" "+f.sSortableDesc+" "+f.sSortableNone),d.bJUI&&(c("th span."+f.sSortIcon+", td span."+f.sSortIcon,i).detach(),c("th, td",i).each(function(){var a=c("div."+f.sSortJUIWrapper,this);c(this).append(a.contents()),a.detach()})),!b&&e&&(e.contains(d.nTableReinsertBefore)?e.insertBefore(g,d.nTableReinsertBefore):e.appendChild(g)),k.css("width",d.sDestroyWidth).removeClass(f.sTable),o=d.asDestroyStripes.length,o&&l.children().each(function(a){c(this).addClass(d.asDestroyStripes[a%o])});var p=c.inArray(d,c.fn.DataTable.settings);p!==-1&&c.fn.DataTable.settings.splice(p,1)})})}function l(){function b(b){return a.loadingTemplate=b,a}function e(b){return c.ajax({dataType:"json",url:b,success:function(a){c.extend(!0,c.fn.DataTable.defaults,{language:a})}}),a}function f(b){return c.extend(!0,c.fn.DataTable.defaults,{language:b}),a}function g(b){return c.extend(c.fn.DataTable.defaults,{displayLength:b}),a}function h(b){return a.bootstrapOptions=b,a}function i(b){return c.extend(c.fn.DataTable.defaults,{dom:b}),a}function j(a,b){if(d.isString(a)){var e={};e[a]=b,c.extend(c.fn.DataTable.defaults,e)}}var a={loadingTemplate:"<h3>Loading...</h3>",bootstrapOptions:{},setLoadingTemplate:b,setLanguageSource:e,setLanguage:f,setDisplayLength:g,setBootstrapOptions:h,setDOM:i,setOption:j};return a}function m(a){function f(b,c){var e=d.element(a.compileHtml(c));b.after(e),b.hide(),e.show()}function g(b){b.show();var c=b.next();a.isLoading(c)&&c.remove()}function h(a,b){var e="#"+a.attr("id");c.fn.dataTable.isDataTable(e)&&d.isObject(b)&&(b.destroy=!0);var f=a.DataTable(b),g=a.dataTable(),h={id:a.attr("id"),DataTable:f,dataTable:g};return k(b,h),h}function i(a,b){return e.hideLoading(a),e.renderDataTable(a,b)}function j(a){b.push(a)}function k(a,c){d.forEach(b,function(b){d.isFunction(b.postRender)&&b.postRender(a,c)})}function l(a){d.forEach(b,function(b){d.isFunction(b.preRender)&&b.preRender(a)})}var b=[],e={showLoading:f,hideLoading:g,renderDataTable:h,hideLoadingAndRenderDataTable:i,registerPlugin:j,postRender:k,preRender:l};return e}function n(){return{withOptions:function(a){return this.options=a,this}}}function o(a,b,c,d){function e(e){function j(b,e){g=b,h=e;var j=d.newDTInstance(i),k=c.hideLoadingAndRenderDataTable(b,i.options);return f=k.DataTable,d.copyDTProperties(k,j),a.when(j)}function k(){}function l(){}function m(){f.destroy(),c.showLoading(g,h),j(g,h)}var f,g,h,i=Object.create(b);return i.name="DTDefaultRenderer",i.options=e,i.render=j,i.reloadData=k,i.changeData=l,i.rerender=m,i}return{create:e}}function p(a,b,c,d,e,f,g){function h(h){function p(a,c,e){i=e,k=a,l=c.$parent,n=g.newDTInstance(o);var h=b.defer(),m=i.match(/<tbody([\s\S]*)<\/tbody>/i),p=m[1],q=p.match(/^\s*.+?\s+in\s+([a-zA-Z0-9\.-_$]*)\s*/m);if(!q)throw new Error('Expected expression in form of "_item_ in _collection_[ track by _id_]" but got "{0}".',p);var r=q[1],s=!1;return l.$watchCollection(r,function(){j&&s&&t(),d(function(){s=!0,f.preRender(o.options);var a=f.hideLoadingAndRenderDataTable(k,o.options);j=a.DataTable,g.copyDTProperties(a,n),h.resolve(n)},0,!1)},!0),h.promise}function q(){a.warn("The Angular Renderer does not support reloading data. You need to do it directly on your model")}function r(){a.warn("The Angular Renderer does not support changing the data. You need to change your model directly.")}function s(){t(),f.showLoading(k,l),f.preRender(h),d(function(){var a=f.hideLoadingAndRenderDataTable(k,o.options);j=a.DataTable,g.copyDTProperties(a,n)},0,!1)}function t(){m&&m.$destroy(),j.ngDestroy(),k.html(i),m=l.$new(),c(k.contents())(m)}var i,j,k,l,m,n,o=Object.create(e);return o.name="DTNGRenderer",o.options=h,o.render=p,o.reloadData=q,o.changeData=r,o.rerender=s,o}return{create:h}}function q(a,b,c,e,f,g){function h(h){function o(b,c){var d=a.defer();return m=g.newDTInstance(n),k=b,l=c,s(n.options.fnPromise,f.renderDataTable).then(function(a){i=a.DataTable,g.copyDTProperties(a,m),d.resolve(m)}),d.promise}function p(a,b){var e=i&&i.page()?i.page():0;d.isFunction(n.options.fnPromise)?s(n.options.fnPromise,v).then(function(c){d.isFunction(a)&&a(c.DataTable.data()),b===!1&&c.DataTable.page(e).draw(!1)}):c.warn("In order to use the reloadData functionality with a Promise renderer, you need to provide a function that returns a promise.")}function q(a){n.options.fnPromise=a,l.dtOptions.fnPromise=a,s(n.options.fnPromise,v)}function r(){i.destroy(),f.showLoading(k,l),f.preRender(h),o(k,l)}function s(b,c){var e=a.defer();if(d.isUndefined(b))throw new Error("You must provide a promise or a function that returns a promise!");return j?j.then(function(){e.resolve(t(b,c))}):e.resolve(t(b,c)),e.promise}function t(b,c){var e=a.defer();return j=d.isFunction(b)?b():b,j.then(function(a){var b=a;if(n.options.sAjaxDataProp)for(var d=n.options.sAjaxDataProp.split(".");d.length;){var f=d.shift();f in b&&(b=b[f])}j=null,e.resolve(u(n.options,k,b,c))}),e.promise}function u(c,d,e,g){var h=a.defer();return delete e.$promise,c.aaData=e,b(function(){f.hideLoading(d),c.bDestroy=!0,h.resolve(g(d,c))},0,!1),h.promise}function v(a,b){return i.clear(),i.rows.add(b.aaData).draw(b.redraw),{id:m.id,DataTable:m.DataTable,dataTable:m.dataTable}}var i,k,l,m,j=null,n=Object.create(e);return n.name="DTPromiseRenderer",n.options=h,n.render=o,n.reloadData=p,n.changeData=q,n.rerender=r,n}return{create:h}}function r(a,b,c,e,f,g){function h(h){function m(b,c){j=b,k=c;var e=a.defer(),h=g.newDTInstance(l);return d.isUndefined(l.options.sAjaxDataProp)&&(l.options.sAjaxDataProp=f.sAjaxDataProp),d.isUndefined(l.options.aoColumns)&&(l.options.aoColumns=f.aoColumns),q(l.options,b).then(function(a){i=a.DataTable,g.copyDTProperties(a,h),e.resolve(h)}),e.promise}function n(a,b){i&&i.ajax.reload(a,b)}function o(a){l.options.ajax=a,k.dtOptions.ajax=a}function p(){e.preRender(h),m(j,k)}function q(c,d){var f=a.defer();return c.bDestroy=!0,i&&(i.destroy(),e.showLoading(j,k),d.empty()),e.hideLoading(d),r(c)?b(function(){f.resolve(e.renderDataTable(d,c))},0,!1):f.resolve(e.renderDataTable(d,c)),f.promise}function r(a){return!(!d.isDefined(a)||!d.isDefined(a.dom))&&a.dom.indexOf("S")>=0}var i,j,k,l=Object.create(c);return l.name="DTAjaxRenderer",l.options=h,l.render=m,l.reloadData=n,l.changeData=o,l.rerender=p,l}return{create:h}}function s(a,b,c,e){function f(f,g){if(g){if(f&&f.serverSide)throw new Error("You cannot use server side processing along with the Angular renderer!");return b.create(f)}if(d.isDefined(f)){if(d.isDefined(f.fnPromise)&&null!==f.fnPromise){if(f.serverSide)throw new Error("You cannot use server side processing along with the Promise renderer!");return c.create(f)}return d.isDefined(f.ajax)&&null!==f.ajax||d.isDefined(f.ajax)&&null!==f.ajax?e.create(f):a.create(f)}return a.create()}return{fromOptions:f}}function t(a){function b(a,c){var e=d.copy(a);if((d.isUndefined(e)||null===e)&&(e={}),d.isUndefined(c)||null===c)return e;if(d.isObject(c))for(var f in c)c.hasOwnProperty(f)&&(e[f]=b(e[f],c[f]));else e=d.copy(c);return e}function e(a,b){d.isObject(a)&&delete a[b]}function f(b,e){var f=a.defer(),h=[],i={},j=e||[];if(!d.isObject(b)||d.isArray(b))f.resolve(b);else{i=d.extend(i,b);for(var k in i)i.hasOwnProperty(k)&&c.inArray(k,j)===-1&&(d.isArray(i[k])?h.push(g(i[k])):h.push(a.when(i[k])));a.all(h).then(function(a){var b=0;for(var d in i)i.hasOwnProperty(d)&&c.inArray(d,j)===-1&&(i[d]=a[b++]);f.resolve(i)})}return f.promise}function g(b){var c=a.defer(),e=[],g=[];return d.isArray(b)?(d.forEach(b,function(b){d.isObject(b)?e.push(f(b)):e.push(a.when(b))}),a.all(e).then(function(a){d.forEach(a,function(a){g.push(a)}),c.resolve(g)})):c.resolve(b),c.promise}return{overrideProperties:b,deleteProperty:e,resolveObjectPromises:f,resolveArrayPromises:g}}d.module("datatables.directive",["datatables.instances","datatables.renderer","datatables.options","datatables.util"]).directive("datatable",e),e.$inject=["$q","$http","$log","DTRendererFactory","DTRendererService","DTPropertyUtil"],d.module("datatables.factory",[]).factory("DTOptionsBuilder",f).factory("DTColumnBuilder",g).factory("DTColumnDefBuilder",h).factory("DTLoadingTemplate",i),h.$inject=["DTColumnBuilder"],i.$inject=["$compile","DTDefaultOptions","DT_LOADING_CLASS"],d.module("datatables.instances",["datatables.util"]).factory("DTInstanceFactory",j),d.module("datatables",["datatables.directive","datatables.factory"]).run(k),d.module("datatables.options",[]).constant("DT_DEFAULT_OPTIONS",{sAjaxDataProp:"",aoColumns:[]}).constant("DT_LOADING_CLASS","dt-loading").service("DTDefaultOptions",l),d.module("datatables.renderer",["datatables.instances","datatables.factory","datatables.options","datatables.instances"]).factory("DTRendererService",m).factory("DTRenderer",n).factory("DTDefaultRenderer",o).factory("DTNGRenderer",p).factory("DTPromiseRenderer",q).factory("DTAjaxRenderer",r).factory("DTRendererFactory",s),m.$inject=["DTLoadingTemplate"],o.$inject=["$q","DTRenderer","DTRendererService","DTInstanceFactory"],p.$inject=["$log","$q","$compile","$timeout","DTRenderer","DTRendererService","DTInstanceFactory"],q.$inject=["$q","$timeout","$log","DTRenderer","DTRendererService","DTInstanceFactory"],r.$inject=["$q","$timeout","DTRenderer","DTRendererService","DT_DEFAULT_OPTIONS","DTInstanceFactory"],s.$inject=["DTDefaultRenderer","DTNGRenderer","DTPromiseRenderer","DTAjaxRenderer"],d.module("datatables.util",[]).factory("DTPropertyUtil",t),t.$inject=["$q"]}(window,document,jQuery,angular);